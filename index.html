<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Support Comprehensive Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 8px;
        }
        
        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .kpi-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .kpi-card:hover {
            transform: translateY(-3px);
        }
        
        .kpi-card h3 {
            color: #34495e;
            margin-bottom: 12px;
            font-size: 1em;
        }
        
        .kpi-value {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .kpi-value.good { color: #27ae60; }
        .kpi-value.warning { color: #f39c12; }
        .kpi-value.critical { color: #e74c3c; }
        
        .kpi-subtitle {
            color: #7f8c8d;
            font-size: 0.85em;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        .chart-container h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2em;
        }
        
        .chart-wrapper {
            position: relative;
            height: 280px;
            margin-bottom: 15px;
        }
        
        .chart-wrapper.tall {
            height: 350px;
        }
        
        .table-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .table-header {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .table-content {
            max-height: 400px;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
            font-size: 0.9em;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .status-badge {
            padding: 3px 6px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
        }
        
        .status-progress { background: #3498db; color: white; }
        .status-hold { background: #f39c12; color: white; }
        .status-cancelled { background: #95a5a6; color: white; }
        
        .priority-p1 { color: #e74c3c; font-weight: bold; }
        .priority-p2 { color: #f39c12; font-weight: bold; }
        .priority-p3 { color: #3498db; }
        .priority-p4 { color: #27ae60; }
        
        .aging-critical { background: #ffebee; }
        .aging-warning { background: #fff3e0; }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .metric-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #3498db;
        }
        
        .metric-label {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 4px;
        }
        
        .metric-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .section-title {
            background: white;
            margin: 20px 0 15px 0;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section-title h2 {
            color: #2c3e50;
            font-size: 1.4em;
            margin: 0;
        }
        
        .wide-chart {
            grid-column: span 2;
        }
        
        @media (max-width: 768px) {
            .wide-chart {
                grid-column: span 1;
            }
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .summary-stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .summary-stat .value {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .summary-stat .label {
            font-size: 0.8em;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>IT Support Comprehensive Dashboard</h1>
            <div class="subtitle">Weekly Analysis Report - September 15, 2025 | 728 Total Tickets Analyzed</div>
        </div>
        
        <!-- Main KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <h3>Total Tickets</h3>
                <div class="kpi-value good">728</div>
                <div class="kpi-subtitle">21 Open • 707 Resolved (97.1%)</div>
            </div>
            
            <div class="kpi-card">
                <h3>Resolution SLA</h3>
                <div class="kpi-value warning">83.7%</div>
                <div class="kpi-subtitle">609 Met • 119 Missed</div>
            </div>
            
            <div class="kpi-card">
                <h3>Response SLA</h3>
                <div class="kpi-value good">91.5%</div>
                <div class="kpi-subtitle">666 Met • 62 Missed</div>
            </div>
            
            <div class="kpi-card">
                <h3>Average Aging</h3>
                <div class="kpi-value warning">28.3</div>
                <div class="kpi-subtitle">days for 21 open tickets</div>
            </div>
            
            <div class="kpi-card">
                <h3>Priority Hygiene</h3>
                <div class="kpi-value good">97.9%</div>
                <div class="kpi-subtitle">15 missing priorities</div>
            </div>
            
            <div class="kpi-card">
                <h3>Critical Issues</h3>
                <div class="kpi-value critical">12</div>
                <div class="kpi-subtitle">tickets aging 14+ days</div>
            </div>
        </div>
        
        <!-- Section: Ticket Distribution Analysis -->
        <div class="section-title">
            <h2>Ticket Distribution & Volume Analysis</h2>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <h3>Priority Distribution (728 Tickets)</h3>
                <div class="chart-wrapper">
                    <canvas id="priorityChart"></canvas>
                </div>
                <div class="summary-stats">
                    <div class="summary-stat">
                        <div class="value">425</div>
                        <div class="label">P3 (58.4%)</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">247</div>
                        <div class="label">P4 (33.9%)</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">34</div>
                        <div class="label">P2 (4.7%)</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">7</div>
                        <div class="label">P1 (1.0%)</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Request Type Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="requestTypeChart"></canvas>
                </div>
                <div class="summary-stats">
                    <div class="summary-stat">
                        <div class="value">409</div>
                        <div class="label">Incidents (56.2%)</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">319</div>
                        <div class="label">Service Requests (43.8%)</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Top Categories by Volume</h3>
                <div class="chart-wrapper">
                    <canvas id="categoryVolumeChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Department Activity</h3>
                <div class="chart-wrapper">
                    <canvas id="departmentChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Section: SLA Performance Analysis -->
        <div class="section-title">
            <h2>SLA Performance Analysis</h2>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <h3>SLA Compliance by Priority</h3>
                <div class="chart-wrapper">
                    <canvas id="slaByPriorityChart"></canvas>
                </div>
                <div class="summary-stats">
                    <div class="summary-stat">
                        <div class="value" style="color: #e74c3c;">28.6%</div>
                        <div class="label">P1 Compliance</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value" style="color: #e74c3c;">17.6%</div>
                        <div class="label">P2 Compliance</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value" style="color: #f39c12;">82.6%</div>
                        <div class="label">P3 Compliance</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value" style="color: #27ae60;">95.1%</div>
                        <div class="label">P4 Compliance</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Resolution Time by Priority</h3>
                <div class="chart-wrapper">
                    <canvas id="resolutionTimeChart"></canvas>
                </div>
                <div class="summary-stats">
                    <div class="summary-stat">
                        <div class="value" style="color: #e74c3c;">219.8h</div>
                        <div class="label">P1 Avg</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value" style="color: #f39c12;">98.4h</div>
                        <div class="label">P2 Avg</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value" style="color: #27ae60;">35.4h</div>
                        <div class="label">P3 Avg</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">62.0h</div>
                        <div class="label">P4 Avg</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container wide-chart">
                <h3>SLA Performance by Category</h3>
                <div class="chart-wrapper">
                    <canvas id="slaByCategoryChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Section: Team Performance -->
        <div class="section-title">
            <h2>Team Performance & Workload Analysis</h2>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container wide-chart">
                <h3>Individual Technician Performance</h3>
                <div class="chart-wrapper tall">
                    <canvas id="technicianDetailChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Team Workload Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="teamWorkloadChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Top Performers by Resolution Rate</h3>
                <div class="chart-wrapper">
                    <canvas id="topPerformersChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Section: Aging Analysis -->
        <div class="section-title">
            <h2>Ticket Aging Analysis</h2>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <h3>Aging Bucket Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="agingChart"></canvas>
                </div>
                <div class="summary-stats">
                    <div class="summary-stat">
                        <div class="value">3</div>
                        <div class="label">8-14 days</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">9</div>
                        <div class="label">15-30 days</div>
                    </div>
                    <div class="summary-stat">
                        <div class="value">9</div>
                        <div class="label">31-60 days</div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Aging vs Priority Analysis</h3>
                <div class="chart-wrapper">
                    <canvas id="agingPriorityChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Critical Aging Tickets Table -->
        <div class="table-container">
            <div class="table-header">
                <h3>Critical Aging Tickets (8+ Days) - Immediate Action Required</h3>
            </div>
            <div class="table-content">
                <table id="agingTicketsTable">
                    <thead>
                        <tr>
                            <th>Ticket ID</th>
                            <th>Subject</th>
                            <th>Priority</th>
                            <th>Category</th>
                            <th>Technician</th>
                            <th>Aging Days</th>
                            <th>Status</th>
                            <th>Created Date</th>
                        </tr>
                    </thead>
                    <tbody id="agingTicketsBody">
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Detailed Technician Performance Table -->
        <div class="table-container">
            <div class="table-header">
                <h3>Detailed Technician Performance Breakdown</h3>
            </div>
            <div class="table-content">
                <table id="technicianPerformanceTable">
                    <thead>
                        <tr>
                            <th>Technician</th>
                            <th>Total Tickets</th>
                            <th>Open</th>
                            <th>Closed</th>
                            <th>Resolution Rate</th>
                            <th>P1</th>
                            <th>P2</th>
                            <th>P3</th>
                            <th>P4</th>
                        </tr>
                    </thead>
                    <tbody id="technicianPerformanceBody">
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Performance Summary Metrics -->
        <div class="chart-container">
            <h3>Comprehensive Performance Summary</h3>
            <div class="metric-grid">
                <div class="metric-item">
                    <div class="metric-label">Total Volume</div>
                    <div class="metric-value">728 tickets</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Resolution Rate</div>
                    <div class="metric-value">97.1%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Response SLA</div>
                    <div class="metric-value">91.5%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Resolution SLA</div>
                    <div class="metric-value">83.7%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Active Technicians</div>
                    <div class="metric-value">17 staff</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Support Teams</div>
                    <div class="metric-value">13 groups</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Avg Aging (Open)</div>
                    <div class="metric-value">28.3 days</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Priority Hygiene</div>
                    <div class="metric-value">97.9%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">High Priority Open</div>
                    <div class="metric-value">1 ticket</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Critical Aging</div>
                    <div class="metric-value">12 tickets</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">Database SLA</div>
                    <div class="metric-value" style="color: #27ae60;">98.0%</div>
                </div>
                <div class="metric-item">
                    <div class="metric-label">General Category SLA</div>
                    <div class="metric-value" style="color: #e74c3c;">47.3%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive dashboard data from JSON
        const dashboardData = {
            totalTickets: 728,
            aging_buckets: {
                "0-2 days": {"count": 0},
                "3-7 days": {"count": 0},
                "8-14 days": {"count": 3},
                "15-30 days": {"count": 9},
                "31-60 days": {"count": 9},
                ">60 days": {"count": 0}
            },
            priority_distribution: {
                "P1": 7,
                "P2": 34,
                "P3": 425,
                "P4": 247,
                "Not Assigned": 15
            },
            request_types: {
                "Incidents": 409,
                "Service Requests": 319
            },
            categories: {
                "IT Requests": 226,
                "Database": 99,
                "General": 74,
                "S - Security": 56,
                "S - Network": 45
            },
            departments: {
                "IT": 150,
                "Customer Care": 84,
                "Security": 68,
                "Collection": 42,
                "Finance": 22
            },
            sla_by_priority: {
                "P1": {"compliance_rate": 28.6, "total": 7, "met": 2, "missed": 5},
                "P2": {"compliance_rate": 17.6, "total": 34, "met": 6, "missed": 28},
                "P3": {"compliance_rate": 82.6, "total": 425, "met": 351, "missed": 74},
                "P4": {"compliance_rate": 95.1, "total": 247, "met": 235, "missed": 12},
                "Not Assigned": {"compliance_rate": 100.0, "total": 15, "met": 15, "missed": 0}
            },
            resolution_times: {
                "P1": 219.8,
                "P2": 98.4,
                "P3": 35.4,
                "P4": 62.0,
                "Not Assigned": 472.4
            },
            sla_by_category: {
                "Database": {"compliance_rate": 98.0, "total": 99},
                "S - Hardware": {"compliance_rate": 100.0, "total": 16},
                "S - Email": {"compliance_rate": 100.0, "total": 28},
                "IT requests": {"compliance_rate": 85.4, "total": 226},
                "General": {"compliance_rate": 47.3, "total": 74},
                "S - Security": {"compliance_rate": 78.6, "total": 56},
                "S - Network": {"compliance_rate": 93.3, "total": 45},
                "Applications": {"compliance_rate": 83.3, "total": 18}
            },
            technicians: {
                "Muhammad Nabeel Fayyaz [SAT]": {"total_tickets": 222, "open_tickets": 4, "closed_tickets": 218, "resolution_rate": 98.2, "priority_breakdown": {"P4": 83, "P3": 138, "P1": 1}},
                "Devendra Parmar": {"total_tickets": 118, "open_tickets": 1, "closed_tickets": 117, "resolution_rate": 99.2, "priority_breakdown": {"P3": 97, "P4": 20, "P2": 1}},
                "Mohammed Habeebuddin": {"total_tickets": 88, "open_tickets": 2, "closed_tickets": 86, "resolution_rate": 97.7, "priority_breakdown": {"P4": 83, "Not Assigned": 3, "P3": 2}},
                "Tony Joseph [SAT]": {"total_tickets": 73, "open_tickets": 1, "closed_tickets": 72, "resolution_rate": 98.6, "priority_breakdown": {"P3": 65, "P2": 1, "P4": 7}},
                "Yasir Zeeshan Akbar Ali": {"total_tickets": 57, "open_tickets": 2, "closed_tickets": 55, "resolution_rate": 96.5, "priority_breakdown": {"P3": 49, "P4": 7, "P2": 1}},
                "Jawahr Alotibie": {"total_tickets": 45, "open_tickets": 4, "closed_tickets": 41, "resolution_rate": 91.1, "priority_breakdown": {"P4": 19, "P1": 6, "P3": 10, "Not Assigned": 10}},
                "Mohammed Adnan Mohammed": {"total_tickets": 35, "open_tickets": 0, "closed_tickets": 35, "resolution_rate": 100.0, "priority_breakdown": {"P2": 30, "P3": 5}},
                "Ahmed Gaafer Mohamed Mostafa [SAT]": {"total_tickets": 24, "open_tickets": 0, "closed_tickets": 24, "resolution_rate": 100.0, "priority_breakdown": {"P3": 23, "P4": 1}},
                "Jaffar Ali Rahimansha [SAT]": {"total_tickets": 20, "open_tickets": 1, "closed_tickets": 19, "resolution_rate": 95.0, "priority_breakdown": {"P3": 18, "P4": 2}},
                "Syed Azam Saleem": {"total_tickets": 19, "open_tickets": 3, "closed_tickets": 16, "resolution_rate": 84.2, "priority_breakdown": {"P3": 6, "P4": 13}}
            },
            teams: {
                "Technical Service Desk": {"total_tickets": 209, "open_tickets": 4, "closed_tickets": 205},
                "System Services": {"total_tickets": 112, "open_tickets": 2, "closed_tickets": 110},
                "Network Services": {"total_tickets": 111, "open_tickets": 3, "closed_tickets": 108},
                "Database Team": {"total_tickets": 107, "open_tickets": 5, "closed_tickets": 102},
                "IT Team": {"total_tickets": 71, "open_tickets": 1, "closed_tickets": 70},
                "Applications Team": {"total_tickets": 53, "open_tickets": 5, "closed_tickets": 48}
            },
            aging_tickets: [
                {"request_id": 42932, "subject": "CCTV - Ground Floor", "priority": "P3", "category": "Not Assigned", "technician": "Yasir Zeeshan Akbar Ali", "aging_days": 14, "created_time": "08/31/2025 09:28", "status": "On Hold (Other)"},
                {"request_id": 42935, "subject": "S - Application - Amlock - Access request", "priority": "P3", "category": "S - Application", "technician": "Yazan Almasri", "aging_days": 14, "created_time": "08/31/2025 10:55", "status": "In Progress"},
                {"request_id": 42945, "subject": "SECTONA PAM", "priority": "P3", "category": "Not Assigned", "technician": "Yasir Zeeshan Akbar Ali", "aging_days": 14, "created_time": "08/31/2025 15:39", "status": "On Hold (Other)"},
                {"request_id": 42675, "subject": "S - IAM - User Management - Account Creation", "priority": "P4", "category": "S - IAM", "technician": "Jawahr Alotibie", "aging_days": 28, "created_time": "08/17/2025 10:43", "status": "In Progress"},
                {"request_id": 42676, "subject": "New Employee - Cyber Security", "priority": "P4", "category": "Not Assigned", "technician": "Muhammad Nabeel Fayyaz [SAT]", "aging_days": 28, "created_time": "08/17/2025 11:24", "status": "On Hold (New Joinee)"},
                {"request_id": 42727, "subject": "Request for New LCDPD Tableau Sheet", "priority": "P3", "category": "Database", "technician": "Syed Azam Saleem", "aging_days": 26, "created_time": "08/19/2025 16:40", "status": "On Hold (User Response)"},
                {"request_id": 42735, "subject": "S - Application - Orion - Access Request", "priority": "P4", "category": "S - Application", "technician": "Yazan Almasri", "aging_days": 25, "created_time": "08/20/2025 10:25", "status": "In Progress"},
                {"request_id": 42895, "subject": "Pending Requests", "priority": "P3", "category": "Not Assigned", "technician": "Jawahr Alotibie", "aging_days": 18, "created_time": "08/27/2025 11:01", "status": "In Progress"},
                {"request_id": 42302, "subject": "S - Hardware - Telephone - Others", "priority": "P4", "category": "S - Hardware", "technician": "Muhammad Nabeel Fayyaz [SAT]", "aging_days": 41, "created_time": "08/04/2025 17:17", "status": "Cancelled"},
                {"request_id": 42347, "subject": "S - Software - Apps - Microsoft Office", "priority": "P3", "category": "S - Software", "technician": "Muhammad Nabeel Fayyaz [SAT]", "aging_days": 40, "created_time": "08/05/2025 16:16", "status": "Cancelled"},
                {"request_id": 42424, "subject": "RE: support", "priority": "P3", "category": "IT requests", "technician": "Jawahr Alotibie", "aging_days": 39, "created_time": "08/06/2025 11:45", "status": "On Hold (Other)"},
                {"request_id": 42575, "subject": "S - Application - Kastle - Change Password", "priority": "P1", "category": "S - Application", "technician": "Jawahr Alotibie", "aging_days": 33, "created_time": "08/12/2025 16:01", "status": "Cancelled"}
            ]
        };

        // Chart configurations
        Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
        Chart.defaults.color = '#2c3e50';

        // Priority Distribution Chart
        const priorityCtx = document.getElementById('priorityChart').getContext('2d');
        new Chart(priorityCtx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(dashboardData.priority_distribution),
                datasets: [{
                    data: Object.values(dashboardData.priority_distribution),
                    backgroundColor: ['#e74c3c', '#f39c12', '#3498db', '#27ae60', '#95a5a6'],
                    borderColor: '#ffffff',
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Request Type Chart
        const requestTypeCtx = document.getElementById('requestTypeChart').getContext('2d');
        new Chart(requestTypeCtx, {
            type: 'pie',
            data: {
                labels: Object.keys(dashboardData.request_types),
                datasets: [{
                    data: Object.values(dashboardData.request_types),
                    backgroundColor: ['#e74c3c', '#3498db'],
                    borderColor: '#ffffff',
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Category Volume Chart
        const categoryCtx = document.getElementById('categoryVolumeChart').getContext('2d');
        new Chart(categoryCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(dashboardData.categories),
                datasets: [{
                    label: 'Tickets',
                    data: Object.values(dashboardData.categories),
                    backgroundColor: '#3498db',
                    borderColor: '#2980b9',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Department Chart
        const departmentCtx = document.getElementById('departmentChart').getContext('2d');
        new Chart(departmentCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(dashboardData.departments),
                datasets: [{
                    label: 'Tickets',
                    data: Object.values(dashboardData.departments),
                    backgroundColor: '#27ae60',
                    borderColor: '#229954',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // SLA by Priority Chart
        const slaPriorityCtx = document.getElementById('slaByPriorityChart').getContext('2d');
        new Chart(slaPriorityCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(dashboardData.sla_by_priority),
                datasets: [{
                    label: 'SLA Compliance %',
                    data: Object.values(dashboardData.sla_by_priority).map(item => item.compliance_rate),
                    backgroundColor: function(context) {
                        const value = context.parsed.y;
                        if (value >= 90) return '#27ae60';
                        if (value >= 70) return '#f39c12';
                        return '#e74c3c';
                    },
                    borderColor: '#2c3e50',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // Resolution Time Chart
        const resolutionCtx = document.getElementById('resolutionTimeChart').getContext('2d');
        new Chart(resolutionCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(dashboardData.resolution_times),
                datasets: [{
                    label: 'Avg Hours',
                    data: Object.values(dashboardData.resolution_times),
                    backgroundColor: function(context) {
                        const value = context.parsed.y;
                        if (value >= 100) return '#e74c3c';
                        if (value >= 50) return '#f39c12';
                        return '#27ae60';
                    },
                    borderColor: '#2c3e50',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // SLA by Category Chart
        const slaCategoryCtx = document.getElementById('slaByCategoryChart').getContext('2d');
        const topCategories = Object.entries(dashboardData.sla_by_category)
            .sort((a, b) => b[1].compliance_rate - a[1].compliance_rate);
        
        new Chart(slaCategoryCtx, {
            type: 'bar',
            data: {
                labels: topCategories.map(item => item[0]),
                datasets: [{
                    label: 'SLA Compliance %',
                    data: topCategories.map(item => item[1].compliance_rate),
                    backgroundColor: function(context) {
                        const value = context.parsed.y;
                        if (value >= 90) return '#27ae60';
                        if (value >= 70) return '#f39c12';
                        return '#e74c3c';
                    },
                    borderColor: '#2c3e50',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // Detailed Technician Chart
        const techDetailCtx = document.getElementById('technicianDetailChart').getContext('2d');
        const topTechs = Object.entries(dashboardData.technicians)
            .sort((a, b) => b[1].total_tickets - a[1].total_tickets)
            .slice(0, 10);

        new Chart(techDetailCtx, {
            type: 'bar',
            data: {
                labels: topTechs.map(tech => tech[0].split(' ')[0] + ' ' + tech[0].split(' ')[1]),
                datasets: [{
                    label: 'Total Tickets',
                    data: topTechs.map(tech => tech[1].total_tickets),
                    backgroundColor: '#3498db',
                    borderColor: '#2980b9',
                    borderWidth: 2,
                    yAxisID: 'y'
                }, {
                    label: 'Resolution Rate %',
                    data: topTechs.map(tech => tech[1].resolution_rate),
                    type: 'line',
                    borderColor: '#e74c3c',
                    backgroundColor: '#e74c3c',
                    borderWidth: 3,
                    fill: false,
                    yAxisID: 'y1'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        position: 'left'
                    },
                    y1: {
                        beginAtZero: true,
                        position: 'right',
                        min: 80,
                        max: 100,
                        grid: {
                            drawOnChartArea: false
                        },
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // Team Workload Chart
        const teamCtx = document.getElementById('teamWorkloadChart').getContext('2d');
        const teamEntries = Object.entries(dashboardData.teams);

        new Chart(teamCtx, {
            type: 'bar',
            data: {
                labels: teamEntries.map(team => team[0]),
                datasets: [{
                    label: 'Closed',
                    data: teamEntries.map(team => team[1].closed_tickets),
                    backgroundColor: '#27ae60',
                    borderColor: '#229954',
                    borderWidth: 2
                }, {
                    label: 'Open',
                    data: teamEntries.map(team => team[1].open_tickets),
                    backgroundColor: '#f39c12',
                    borderColor: '#e67e22',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true },
                    y: { stacked: true, beginAtZero: true }
                }
            }
        });

        // Top Performers Chart
        const topPerfCtx = document.getElementById('topPerformersChart').getContext('2d');
        const topPerformers = Object.entries(dashboardData.technicians)
            .filter(tech => tech[1].total_tickets >= 10)
            .sort((a, b) => b[1].resolution_rate - a[1].resolution_rate)
            .slice(0, 8);

        new Chart(topPerfCtx, {
            type: 'bar',
            data: {
                labels: topPerformers.map(tech => tech[0].split(' ')[0]),
                datasets: [{
                    label: 'Resolution Rate %',
                    data: topPerformers.map(tech => tech[1].resolution_rate),
                    backgroundColor: '#27ae60',
                    borderColor: '#229954',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        min: 80,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // Aging Distribution Chart
        const agingCtx = document.getElementById('agingChart').getContext('2d');
        new Chart(agingCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(dashboardData.aging_buckets),
                datasets: [{
                    label: 'Open Tickets',
                    data: Object.values(dashboardData.aging_buckets).map(bucket => bucket.count),
                    backgroundColor: ['#27ae60', '#2ecc71', '#f39c12', '#e67e22', '#e74c3c', '#c0392b'],
                    borderColor: ['#229954', '#27ae60', '#d68910', '#dc7633', '#cb4335', '#a93226'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { stepSize: 1 }
                    }
                }
            }
        });

        // Aging vs Priority Analysis
        const agingPriorityCtx = document.getElementById('agingPriorityChart').getContext('2d');
        
        // Group aging tickets by priority
        const agingByPriority = {};
        dashboardData.aging_tickets.forEach(ticket => {
            if (!agingByPriority[ticket.priority]) {
                agingByPriority[ticket.priority] = [];
            }
            agingByPriority[ticket.priority].push(ticket.aging_days);
        });

        const agingPriorityData = Object.keys(agingByPriority).map(priority => {
            const days = agingByPriority[priority];
            return {
                priority: priority,
                avgAging: days.reduce((a, b) => a + b, 0) / days.length,
                count: days.length
            };
        });

        new Chart(agingPriorityCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Tickets',
                    data: agingPriorityData.map(item => ({
                        x: item.avgAging,
                        y: item.count
                    })),
                    backgroundColor: function(context) {
                        const priority = agingPriorityData[context.dataIndex].priority;
                        if (priority === 'P1') return '#e74c3c';
                        if (priority === 'P2') return '#f39c12';
                        if (priority === 'P3') return '#3498db';
                        return '#27ae60';
                    },
                    borderColor: '#2c3e50',
                    borderWidth: 2,
                    pointRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Average Aging Days'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Number of Tickets'
                        },
                        beginAtZero: true
                    }
                }
            }
        });

        // Populate Tables
        function populateAgingTable() {
            const tbody = document.getElementById('agingTicketsBody');
            
            dashboardData.aging_tickets.forEach(ticket => {
                const row = document.createElement('tr');
                
                if (ticket.aging_days >= 30) {
                    row.classList.add('aging-critical');
                } else if (ticket.aging_days >= 14) {
                    row.classList.add('aging-warning');
                }
                
                row.innerHTML = `
                    <td><strong>#${ticket.request_id}</strong></td>
                    <td title="${ticket.subject}">${ticket.subject.length > 40 ? ticket.subject.substring(0, 40) + '...' : ticket.subject}</td>
                    <td><span class="priority-${ticket.priority.toLowerCase()}">${ticket.priority}</span></td>
                    <td>${ticket.category}</td>
                    <td>${ticket.technician.split(' ')[0]} ${ticket.technician.split(' ')[1] || ''}</td>
                    <td><strong>${ticket.aging_days} days</strong></td>
                    <td><span class="status-badge status-${ticket.status.includes('Progress') ? 'progress' : ticket.status.includes('Hold') ? 'hold' : 'cancelled'}">${ticket.status}</span></td>
                    <td>${ticket.created_time}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function populateTechnicianTable() {
            const tbody = document.getElementById('technicianPerformanceBody');
            
            Object.entries(dashboardData.technicians).forEach(([name, data]) => {
                const row = document.createElement('tr');
                
                const priorities = data.priority_breakdown;
                
                row.innerHTML = `
                    <td>${name.split(' ')[0]} ${name.split(' ')[1] || ''}</td>
                    <td><strong>${data.total_tickets}</strong></td>
                    <td>${data.open_tickets}</td>
                    <td>${data.closed_tickets}</td>
                    <td><strong>${data.resolution_rate}%</strong></td>
                    <td>${priorities.P1 || 0}</td>
                    <td>${priorities.P2 || 0}</td>
                    <td>${priorities.P3 || 0}</td>
                    <td>${priorities.P4 || 0}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Initialize tables
        populateAgingTable();
        populateTechnicianTable();
    </script>
</body>
</html>